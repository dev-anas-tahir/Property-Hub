{% load unicorn %}

<div>
    <!-- Loading overlay -->
    <div unicorn:loading class="position-relative">
        <div class="position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center" style="background: rgba(255,255,255,0.8); z-index: 1000;">
            <div class="text-center">
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
                <p class="mt-2 text-muted">Loading properties...</p>
            </div>
        </div>
    </div>
    
    {% if has_properties %}
        <!-- Properties grid -->
        <div class="row">
            {% for property_id in properties %}
                <div class="col-md-4 mb-4">
                    {% unicorn 'property-card' property_id=property_id %}
                </div>
            {% endfor %}
        </div>
        
        <!-- Pagination -->
        {% if total_pages > 1 %}
            <div class="row">
                <div class="col-12">
                    {% unicorn 'pagination' current_page=current_page total_pages=total_pages %}
                </div>
            </div>
        {% endif %}

        <!-- Results info -->
        <div class="row mt-3">
            <div class="col-12 text-center text-muted">
                <small>
                    Showing page {{ current_page }} of {{ total_pages }} 
                    ({{ total_count }} propert{{ total_count|pluralize:"y,ies" }} total)
                </small>
            </div>
        </div>
    {% else %}
        <!-- Empty state -->
        <div class="row">
            <div class="col-12">
                <div class="alert alert-info text-center" role="alert">
                    <i class="bi bi-info-circle fs-1 d-block mb-3"></i>
                    <h5>{{ empty_message }}</h5>
                    {% if show_my_properties %}
                        <a href="{% url 'properties:create' %}" class="btn btn-primary mt-3">
                            <i class="bi bi-plus-circle"></i> Create Your First Property
                        </a>
                    {% elif not show_favorites_only %}
                        <p class="mb-0 mt-2">Check back later for new listings.</p>
                    {% endif %}
                </div>
            </div>
        </div>
    {% endif %}
</div>
